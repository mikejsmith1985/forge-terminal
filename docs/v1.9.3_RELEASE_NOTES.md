# Forge Terminal v1.9.3 Release Notes

**Release Date**: December 6, 2025  
**Type**: Bug Fix Release

## ğŸ› Bug Fixes

This release addresses critical usability issues reported in v1.9.2:

### 1. Restore Default Cards Now Always Accessible
**Issue**: Users who deleted default command cards couldn't restore them because the restore button was only visible when specific cards were detected as missing.

**Fixed**: 
- Restore Default Command Cards section now always visible in Settings
- Shows warning with checkboxes when cards are missing
- Shows success message with "Restore All" button when all cards present
- Can re-add any deleted cards anytime

### 2. Manual Session Refresh Button Added
**Issue**: No visible way to manually reconnect/refresh terminal sessions. Users had to wait for automatic reconnection or restart the app.

**Fixed**:
- Added prominent refresh button (ğŸ”„) to toolbar
- Title: "Reconnect Terminal Session"
- Instantly reconnects active terminal with toast confirmation
- Useful for recovering from network issues or when server restarts

### 3. Updates Reload in Same Tab
**Issue**: When applying updates, the page opened in a new tab, causing confusion and multiple app instances.

**Fixed**:
- Update mechanism now reloads the current tab instead of opening new one
- Prevents accidental multi-instance scenarios
- Same fix applied to Settings card restoration

### 4. Tab Directory Persistence
**Issue**: After restarting Forge Terminal, all tabs reset to the default root folder instead of remembering their last working directory.

**Fixed**:
- ğŸ’¾ Tabs now remember and restore their working directories
- Each tab independently tracks its current directory
- On restart, terminals automatically `cd` to saved directory
- Works across PowerShell, CMD, and WSL
- Multi-tab support: each tab maintains separate directory state

## ğŸ¯ How It Works

### Directory Persistence Flow:
1. Terminal detects directory changes as you navigate
2. Full path automatically saved to tab state
3. Tab state persisted to disk (debounced)
4. On restart, session loads with directory info
5. Terminal auto-executes `cd` command on connection
6. Tab name updates to current folder

### Supported Shells:
- âœ… PowerShell: `cd "path"`
- âœ… CMD: `cd /d "path"` (includes drive change)
- âœ… WSL/Bash: `cd "path"`

## ğŸ“‹ Technical Details

**Files Changed**: 6 files, ~180 lines
- Frontend: App.jsx, ForgeTerminal.jsx, SettingsModal.jsx, UpdateModal.jsx, useTabManager.js
- Backend: sessions.go (added `currentDirectory` field to TabState)

**New Field**: `TabState.currentDirectory` (string, optional)

**API Changes**: None - fully backward compatible

## ğŸ§ª Testing

- âœ… Comprehensive E2E test suite added (`v1.9.3-fixes.spec.js`)
- âœ… All fixes verified with running application
- âœ… Session persistence tested with actual directories
- âœ… Multi-tab scenarios validated

## ğŸ“¦ Installation

### Windows
Download `forge-windows-amd64.exe` from the [releases page](https://github.com/mikejsmith1985/forge-terminal/releases/tag/v1.9.3).

### macOS
```bash
wget https://github.com/mikejsmith1985/forge-terminal/releases/download/v1.9.3/forge-darwin-amd64
chmod +x forge-darwin-amd64
./forge-darwin-amd64
```

### Linux
```bash
wget https://github.com/mikejsmith1985/forge-terminal/releases/download/v1.9.3/forge-linux-amd64
chmod +x forge-linux-amd64
./forge-linux-amd64
```

## ğŸ”„ Upgrading from v1.9.2

1. Close Forge Terminal
2. Download new version
3. Replace old executable
4. Restart Forge Terminal
5. Your tabs and directories will be automatically restored!

**Note**: First launch after upgrade will restore tabs to their default directories. Subsequent restarts will use directory persistence.

## âš™ï¸ Breaking Changes

None - this release is fully backward compatible with v1.9.2.

## ğŸ™ Thanks

Special thanks to the community for reporting these issues and helping improve Forge Terminal!

## ğŸ”— Links

- [Full Changelog](https://github.com/mikejsmith1985/forge-terminal/compare/v1.9.2...v1.9.3)
- [Documentation](https://github.com/mikejsmith1985/forge-terminal/blob/main/README.md)
- [Report Issues](https://github.com/mikejsmith1985/forge-terminal/issues)

---

**Previous Release**: [v1.9.2](https://github.com/mikejsmith1985/forge-terminal/releases/tag/v1.9.2) - Bug Fixes (Default cards restoration, auto-reconnect)  
**Next**: TBD
